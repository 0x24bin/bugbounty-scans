<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Flash Tester</title>
  <style>
     body{color:#000; margin: 0; padding: 0;}
  </style>
</head>
<body>
  <div id='rb_flash_div'>
  </div>
  <script type="text/javascript"> 
  (function() {
    var QueryString = function () {
      var query_string = {};
      var query = window.location.search.substring(1);
      var vars = query.split("&");
      for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if (typeof query_string[pair[0]] === "undefined") {
          query_string[pair[0]] = pair[1];
        } else if (typeof query_string[pair[0]] === "string") {
          var arr = [ query_string[pair[0]], pair[1] ];
          query_string[pair[0]] = arr;
        } else {
          query_string[pair[0]].push(pair[1]);
        }
      } 
        return query_string;
    } (); 

    var rb_link1 = QueryString.rb_link1;
    if (rb_link1.indexOf('http') != 0 && rb_link1.indexOf('/') == 0) {
     rb_link1 = document.location.protocol + '//' + 'sales.mail.ru' + rb_link1;
    }
    var rb_swf = "https://swftest.mradx.net/img/" + decodeURI(QueryString.rb_swf);
    var rb_fver = QueryString.rb_fver;
    var rb_width = QueryString.rb_width;
    var rb_height = QueryString.rb_height;
    var rb_allowscriptaccess = 0;
    var rb_wmode = "opaque";
    var rb_flash = 0;

    var rb_innerhtml = true;
    if (navigator.mimeTypes && navigator.mimeTypes["application/x-shockwave-flash"] ) {
      var plugin = navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin;
      if (plugin && parseInt(plugin.description.match(/\d+/)[0]) >= rb_fver)
        rb_flash = 1;
    } else if (typeof window.ActiveXObject != "undefined") {
      try {
        var object = new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
        if (object && object.GetVariable("$version") && parseInt(object.GetVariable("$version").match(/\d+/)[0]) >= rb_fver)
          rb_flash = 1;
      } catch (e) {}
    }
    if (rb_flash) {
      var rb_rnd = Math.round(Math.random() * 1000000000);
      var rb_vars_arr = Array();
      rb_vars_arr.push('link1='+escape(rb_link1).replace(/\+/g,'%2B'));
      var rb_vars = rb_vars_arr.join('&');
      var rb_html = '<div class="rb_banner"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+(document.location.protocol=='https:'?'https':'http')+'://active.macromedia.com/flash2/cabs/swflash.cab#version='+rb_fver+',0,0,0" id="getmov'+rb_rnd+'" width="'+rb_width+'" height="'+rb_height+'">'+(rb_allowscriptaccess?'<param name="allowscriptaccess" value="always" />':'')+'<param name="movie" value="'+rb_swf+'" /><param name="quality" value="high" /><param name="wmode" value="'+rb_wmode+'" /><param name="FlashVars" value="'+rb_vars+'" /><embed name="embed_getmov'+rb_rnd+'" flashvars="'+rb_vars+'" '+(rb_allowscriptaccess?'allowscriptaccess="always" ':'')+'src="'+rb_swf+'" quality="high" wmode="'+rb_wmode+'" width="'+rb_width+'" height="'+rb_height+'" type="application/x-shockwave-flash" pluginspage="'+(document.location.protocol=='https:'?'https':'http')+'://www.macromedia.com/shockwave/download/index.cgiP1_Prod_Version=ShockwaveFlash" /></object></div>';
      if (rb_innerhtml) {
        var rb_flash_div = document.getElementById("rb_flash_div");
        rb_flash_div.innerHTML = rb_html;
      }
    };
  })();
  </script>
</body>
</html>
